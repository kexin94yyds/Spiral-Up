# [经验分享] 当AI在一个复杂需求上持续出错时...

在我们之前的经验分享中，强调过跟AI一起合作开发时，要尽可能的执行结构化的思维方式，将任务拆分成小块，一次让AI执行一个小任务，这样可以有效的防止AI出错。但是，有时候，**有些任务本身就涉及到多个文件代码的同时更新**，对于不懂代码的人来说，是很难将这样的需求进行进一步拆分来确保AI不出错的。此时，我们除了不断的优化需求(描述的更准确 + 限制不要更改无关代码)外，好像没有更好的办法了。



今天我在开发一个ios app的时候遇到了类似的问题，但是后来顺利解决了。

这是一个背单词的app，当需要复习单词的时候，系统会给用户发送一条通知，用户点击通知会直接打开app。但是并不能打开app后直接跳转到该单词的复习页面。但这一点对于用户体验至关重要。所以，我在Composer中做了如下尝试。

**第一次**: 

现在我们一起来更新一下系统通知的行为。目前点击复习通知，只能打开app，并不能直接进入单词的复习页面。请帮我实现点击通知后直接打开单词复习页面的功能。

结果: 运行报错。 我截图后让ai解决错误，ai表现的很自信，更新后结果继续报另外的错误。几轮这样的交流下来，报错越来越多。好不容易错误都消除了，进入app，发现有些跟这个功能完全无关的逻辑被修改了，同时通知的更新仍然没有实现。

**第二次**: 

我意识到不能在错误的基础上继续尝试了。于是我通过checkpoint回到了提出需求之前的状态。重新输入了一样的需求，并且加上了"请不要修改任何与该需求无关的逻辑"。但是事实证明这样的调整并没有太大帮助，仍然出现了很多熟悉的错误。

**第三次**，

我改换了思路。**不让AI直接来执行这个需求，而是让AI帮我先分析当前的通知逻辑，以及如果要实现新逻辑的话需要做哪里的改动，同时强调暂时不要更新代码**。于是AI按照我的要求对当前逻辑和新逻辑做了详细介绍。 然后，我让**它列出了要实现新的逻辑，有哪些文件需要做调整**。 AI也如实的列出了必须要调整的文件。 最后，我告诉它，**现在你可以按照你的思路来更新代码了**。于是AI开始了对必要文件的更新。经过运行测试，一次搞定！！！



这说明，AI在开发的过程中，对于复杂任务，也需要理清思路才更容易得到正确的结果。而理清思路的这个过程，有时候他并不能自己完成，需要我们引导它去明确新的逻辑和相关的文件。 

![img](https://article-images.zsxq.com/FuPbLM_MvDpRh692EZi035h3tMPp)![img](https://article-images.zsxq.com/FnmBf8aYYPhjr9fmoHBFiFHLndAE)![img](https://article-images.zsxq.com/FoTera434LZNuPdickxOZCuOpIRX)