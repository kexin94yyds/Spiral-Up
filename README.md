# 📚 智能EPUB切书工具

一个智能的EPUB电子书切分工具，能够自动识别章节标题并按章节名称命名文件。

## ✨ 功能特点

- **智能章节识别**：自动从内容中提取章节标题
- **多语言支持**：完美支持中文和英文章节
- **多格式输出**：同时生成Markdown和纯文本格式
- **完整文档**：自动生成目录和合并文档
- **清理功能**：自动处理特殊字符，确保文件名合法

## 🚀 使用方法

```bash
chmod +x 切书神技.zsh
./切书神技.zsh '你的epub文件路径.epub'
```

## 📁 输出结构

```
书名/
├── txt/                    # 纯文本文件
│   ├── 01_章节名.txt
│   ├── 02_章节名.txt
│   └── ...
├── markdown/               # Markdown文件
│   ├── 01_章节名.md
│   ├── 02_章节名.md
│   └── ...
├── html/                   # 原始HTML文件
├── complete.md             # 完整合并版本
└── complete_structured.txt # 完整结构化版本
```

## 🎯 章节标题识别

脚本会按以下优先级提取章节标题：

1. **内容模式识别**：
   - 数字开头：`01 章节名`
   - 中文格式：`第一章 xxx`
   - 英文格式：`Chapter 1 xxx`
   - 特殊章节：目录、序言、前言、后记、附录

2. **HTML标签提取**：
   - `<title>` 标签
   - `<h1>` 到 `<h6>` 标签

3. **首行内容**：如果以上都没找到，使用第一个非空行

4. **备用方案**：`index_split_xxx`

## 📋 依赖要求

- **pandoc**：用于格式转换
- **zsh**：Shell环境
- **unzip**：解压EPUB文件

## 🌟 示例

### 中文书籍
```
- 目录.txt
- 01_chat_gpt_是个_AMA_机器人.txt
- 02_事实核查员机器人.txt
```

### 英文书籍
```
- Contents.txt
- Everyone_Is_a_Creator.txt
- The_Source_of_Creativity.txt
```

## 🔧 技术特性

- 自动文件名清理（处理特殊字符）
- 长度限制（避免文件系统问题）
- 错误处理和恢复
- 图片资源提取
- 批量处理支持

---

🎉 让阅读和学习变得更加高效！ 